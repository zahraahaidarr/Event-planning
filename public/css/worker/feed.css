/* =========================================================
   Feed — Homogenous with Event Discover + IG-style stage
   File: public/css/worker/feed.css
========================================================= */

*{margin:0;padding:0;box-sizing:border-box}

:root{
  --bg:#0f1222;--surface:#14183a;--surface-2:#0e1330;--card:#171c42;
  --text:#eaf0ff;--muted:#aab3d6;--primary:#4f7cff;--primary-2:#7aa0ff;
  --accent:#9c6cff;--success:#36d399;--warning:#f4bf50;--danger:#ff6b6b;
  --ring:rgba(111,140,255,.55);--radius:18px;--shadow:0 10px 30px rgba(0,0,0,.25);

  --bg-primary:var(--surface);
  --bg-secondary:var(--surface-2);
  --bg-tertiary:var(--card);

  --text-primary:var(--text);
  --text-secondary:var(--muted);
  --text-tertiary:#7a84b0;

  --border-color:rgba(255,255,255,.08);
  --accent-primary:var(--primary);
  --accent-secondary:var(--accent);

  --shadow-sm:0 4px 12px rgba(0,0,0,.15);
  --shadow-md:0 8px 20px rgba(0,0,0,.2);

  --radius-sm:10px;
  --radius-md:14px;
  --radius-lg:var(--radius);
}

[data-theme="light"]{
  --bg:#f6f7fb;--surface:#ffffff;--surface-2:#f2f5ff;--card:#ffffff;
  --text:#12152b;--muted:#5a6387;--primary:#3a66ff;--primary-2:#6f90ff;
  --accent:#7b5cff;--success:#16a34a;--warning:#d97706;--danger:#ef4444;
  --ring:rgba(58,102,255,.35);--shadow:0 10px 24px rgba(13,24,61,.10);

  --bg-primary:var(--surface);
  --bg-secondary:var(--surface-2);
  --bg-tertiary:var(--card);

  --text-primary:var(--text);
  --text-secondary:var(--muted);
  --text-tertiary:#7a84b0;

  --border-color:#e0e5f5;

  --shadow-sm:0 2px 8px rgba(13,24,61,.08);
  --shadow-md:0 4px 16px rgba(13,24,61,.12);
}

html,body{height:100%}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:
    radial-gradient(1200px 800px at -10% -10%,#1a2050 0%,var(--bg) 55%),
    radial-gradient(1200px 700px at 110% -10%,#281a55 0%,transparent 50%),
    var(--bg);
  color:var(--text-primary);
  line-height:1.6;

  display:flex;
  min-height:100vh;

  /* ✅ Like IG desktop: no page scroll */
  overflow:hidden;
}

/* =========================================================
   Sidebar
========================================================= */
.sidebar{
  flex:0 0 260px;
  width:260px;
  background:var(--bg-primary);
  border-right:1px solid var(--border-color);
  padding:24px 16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  position:sticky;
  top:0;
  height:100vh;
  overflow-y:auto;
}

.logo{
  display:flex;
  align-items:center;
  padding:10px 8px 18px;
  border-bottom:1px solid rgba(255,255,255,0.05);
}

.logo-link{
  display:flex;
  align-items:center;
  gap:12px;
  text-decoration:none;
  color:inherit;
}

.logo-avatar,.logo-icon{width:40px;height:40px;border-radius:50%}

.logo-avatar{
  object-fit:cover;
  border:2px solid var(--border-color);
  box-shadow:0 0 6px rgba(0,0,0,0.25);
}

.logo-icon{
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:700;font-size:18px;
}

.logo-id{display:flex;flex-direction:column;gap:2px}
.logo-name{
  font-size:18px;font-weight:700;color:var(--text-primary);
  letter-spacing:.3px;text-transform:capitalize;
}
.logo-role{
  font-size:11px;font-weight:600;text-transform:uppercase;
  letter-spacing:1px;color:var(--text-secondary);
}

.nav-section{display:flex;flex-direction:column;gap:4px}
.nav-label{
  font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;
  color:var(--text-tertiary);padding:0 12px;margin-bottom:8px
}
.nav-item{
  display:flex;align-items:center;gap:12px;
  padding:10px 12px;border-radius:var(--radius-sm);
  color:var(--text-secondary);text-decoration:none;
  font-size:14px;font-weight:500;
  transition:all .2s ease;cursor:pointer
}
.nav-item:hover{background:var(--bg-secondary);color:var(--text-primary)}
.nav-item.active{background:var(--bg-secondary);color:#fff}
.nav-icon{width:20px;height:20px;display:flex;align-items:center;justify-content:center}

/* =========================================================
   Page container
========================================================= */
#feedPage{
  flex:1;
  min-width:0;
  height:100vh;
  padding:32px;
  overflow:hidden; /* ✅ keep fixed */
}

/* center content inside */
#feedPage{
  display:flex;
  flex-direction:column;
  gap:14px;
}
#feedPage > *{
  max-width:1200px;
  width:100%;
  margin-left:auto;
  margin-right:auto;
}

/* Header */
#feedHeader{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:14px;
}
#feedHeader h2{font-size:32px;font-weight:700}

#goFollowBtn{
  padding:10px 20px;
  border-radius:var(--radius-sm);
  border:1px solid var(--border-color);
  background:var(--bg-tertiary);
  color:var(--text-primary);
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  transition:all .2s ease;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
#goFollowBtn:hover{background:rgba(255,255,255,.06);transform:translateY(-1px)}

/* Tabs wrapper */
#feedTabs{
  background:var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm);
  padding:12px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.feedTab{
  padding:10px 14px;
  border-radius:var(--radius-sm);
  border:1px solid var(--border-color);
  background:var(--bg-secondary);
  color:var(--text-primary);
  cursor:pointer;
  font-weight:800;
  transition:all .2s ease;
}
.feedTab:hover{transform:translateY(-1px)}
.feedTab.active{
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  border-color:transparent;
  color:#fff;
}

/* Content card */
#feedContent{
  background:var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm);
  padding:18px;

  /* ✅ take remaining height like IG */
  flex:1;
  min-height:0;
  overflow:hidden;
}

.tabPane.hidden{display:none}

/* Events cards (same as before) */
.feedCard{
  background:var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm);
  padding:16px 18px;
  margin-bottom:12px;
  transition:all .3s ease;
}
.feedCard:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}

.feedCardTop{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}
.feedTitle{font-weight:900;font-size:18px;color:var(--text-primary)}
.feedDate{color:var(--text-secondary);font-size:13px}
.feedBody{display:flex;flex-direction:column;gap:6px;color:var(--text-secondary)}
.feedBody strong{color:var(--text-primary)}
.muted{color:var(--text-secondary);font-weight:700}

.emptyBox{
  border:1px dashed var(--border-color);
  border-radius:var(--radius-lg);
  padding:16px;
  color:var(--text-secondary);
  background:rgba(255,255,255,.03);
}

/* =========================================================
   IG STAGE (Posts/Reels/Stories)
========================================================= */
.igStage{
  position:relative;
  height:100%;
  min-height:0;
  display:flex;
  align-items:center;
  justify-content:center;
}

.igViewport{
  position:relative;
  width:min(520px, 92vw);      /* ✅ IG-like width on laptop */
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* Slide card */
.igCard{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  opacity:0;
  transform:scale(.985);
  pointer-events:none;
  transition:opacity .18s ease, transform .18s ease;

  background:var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-sm);
  overflow:hidden;

  display:flex;
  flex-direction:column;
}

.igCard.active{
  opacity:1;
  transform:scale(1);
  pointer-events:auto;
}

/* top */
.igTop{
  padding:14px 16px 10px;
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:12px;
}
.igTitle{
  font-weight:900;
  font-size:16px;
  color:var(--text-primary);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.igMeta{
  font-size:13px;
  color:var(--text-secondary);
  white-space:nowrap;
}

/* media area */
.igMedia{
  flex:1;
  min-height:0;
  background:rgba(0,0,0,.22);
  border-top:1px solid var(--border-color);
  border-bottom:1px solid var(--border-color);

  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* ✅ show FULL image (no crop) */
.igMedia img{
  max-width:100%;
  max-height:100%;
  width:auto;
  height:auto;
  object-fit:contain;
  display:block;
}

.igVideo{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000;
}

.igMediaEmpty{
  color:var(--text-secondary);
  font-weight:800;
  opacity:.85;
}

/* body */
.igBody{padding:12px 16px 14px}
.igText{
  color:var(--text-secondary);
  font-size:14px;
  line-height:1.55;
  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:4;
  overflow:hidden;
}

/* arrows */
.igArrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:44px;height:44px;
  border-radius:14px;
  border:1px solid var(--border-color);
  background:rgba(15,18,34,.55);
  color:var(--text-primary);
  font-size:28px;
  font-weight:900;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:10;
  transition:transform .15s ease, background .15s ease;
}
.igArrow:hover{
  transform:translateY(-50%) scale(1.03);
  background:rgba(255,255,255,.06);
}
.igArrow.left{left:12px}
.igArrow.right{right:12px}
.igArrow:disabled{opacity:.35;cursor:not-allowed}

/* dots */
.igDots{
  margin-top:12px;
  display:flex;
  justify-content:center;
  gap:8px;
}
.igDots .dot{
  width:10px;height:10px;
  border-radius:999px;
  border:1px solid var(--border-color);
  background:rgba(255,255,255,.08);
  cursor:pointer;
}
.igDots .dot.active{
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  border-color:transparent;
}

/* Responsive */
@media (max-width:768px){
  body{display:block;overflow:auto}
  .sidebar{display:none}
  #feedPage{height:auto;overflow:visible;padding:16px}
  #feedContent{overflow:visible}
  .igViewport{height:520px}
}







/* =========================================================
   FIX: Tab visibility + full height panes
========================================================= */

#feedContent{
  display: flex;
  flex-direction: column;
}

/* All panes fill the content card */
.tabPane{
  height: 100%;
  min-height: 0;
}

/* Hide panes FOR REAL (must beat #tab-posts display:flex rules) */
.tabPane.hidden{
  display: none !important;
}

/* Events should scroll inside the card */
#tab-events{
  overflow: auto;
  padding-right: 6px;
}

/* Only when NOT hidden, these become flex (so hidden works) */
#tab-posts:not(.hidden),
#tab-reels:not(.hidden),
#tab-stories:not(.hidden){
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

/* Let the stage take remaining height */
#tab-posts .igStage,
#tab-reels .igStage,
#tab-stories .igStage{
  flex: 1;
  min-height: 0;
}

/* ✅ Force ONLY ONE slide visible */
.igCard{
  display: none;
}
.igCard.active{
  display: flex;
}



/* =========================================================
   Likes + Comments (IG style)
========================================================= */

.igActions{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-top:1px solid var(--border-color);
}

.igActionBtn{
  width:38px;
  height:38px;
  border-radius:12px;
  border:1px solid var(--border-color);
  background:rgba(255,255,255,.04);
  color:var(--text-primary);
  cursor:pointer;
  font-size:18px;
  font-weight:900;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:transform .15s ease, background .15s ease;
}

.igActionBtn:hover{ transform:translateY(-1px); background:rgba(255,255,255,.07); }

.igLikeBtn{
  font-size:20px;
  line-height:1;
}

.igLikeBtn.liked{
  color:var(--danger);
  border-color:rgba(255,107,107,.35);
  background:rgba(255,107,107,.10);
}

.igCounts{
  margin-left:auto;
  color:var(--text-secondary);
  font-weight:800;
  font-size:13px;
  white-space:nowrap;
}

.igComments{
  border-top:1px solid var(--border-color);
  padding:10px 14px 14px;
  background:rgba(0,0,0,.10);
}

.igComments.hidden{ display:none !important; }

.igCommentsList{
  display:flex;
  flex-direction:column;
  gap:10px;
  max-height:180px;
  overflow:auto;
  padding-right:6px;
}

.igCommentRow{
  display:flex;
  gap:10px;
  align-items:flex-start;
}

.igCAvatar{
  width:28px;height:28px;border-radius:50%;
  object-fit:cover;
  border:1px solid var(--border-color);
}

.igCBody{
  flex:1;
  color:var(--text-secondary);
  font-size:13px;
  line-height:1.45;
}

.igCName{
  color:var(--text-primary);
  font-weight:900;
  margin-right:6px;
}

.igCTime{
  display:block;
  margin-top:2px;
  color:var(--text-tertiary);
  font-size:12px;
  font-weight:700;
}

.igCommentForm{
  display:flex;
  gap:10px;
  margin-top:10px;
}

.igCommentForm input{
  flex:1;
  height:38px;
  border-radius:12px;
  border:1px solid var(--border-color);
  background:rgba(255,255,255,.04);
  color:var(--text-primary);
  padding:0 12px;
  outline:none;
}

.igCommentForm input:focus{
  box-shadow:0 0 0 3px var(--ring);
}

.igCommentForm button{
  height:38px;
  padding:0 14px;
  border-radius:12px;
  border:1px solid var(--border-color);
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  color:#fff;
  font-weight:900;
  cursor:pointer;
}



/* ===== Comments Modal (IG-like) ===== */
.cm.hidden{display:none !important}

.cm{
  position:fixed;
  inset:0;
  z-index:9999;
}

.cmOverlay{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter: blur(4px);
}

.cmDialog{
  position:relative;
  width:min(760px, 94vw);
  height:min(620px, 88vh);
  margin:6vh auto;
  background:var(--bg-primary);
  border:1px solid var(--border-color);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-md);
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.cmHead{
  padding:14px 16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid var(--border-color);
}

.cmTitle{font-weight:900;font-size:18px}
.cmClose{
  width:40px;height:40px;border-radius:12px;
  border:1px solid var(--border-color);
  background:var(--bg-secondary);
  color:var(--text-primary);
  font-size:22px;font-weight:900;
  cursor:pointer;
}

.cmBody{
  flex:1;
  min-height:0;
  overflow:auto;
  padding:14px 16px;
}

.cmList{display:flex;flex-direction:column;gap:12px}

.cmItem{
  display:flex;
  gap:12px;
  align-items:flex-start;
}

.cmAvatar{width:40px;height:40px;flex:0 0 40px}
.cmAvatarImg{
  width:40px;height:40px;border-radius:50%;
  object-fit:cover;border:1px solid var(--border-color);
}
.cmAvatarFallback{
  width:40px;height:40px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-weight:900;
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  color:#fff;
}

.cmContent{flex:1;min-width:0}
.cmLine{display:flex;gap:10px;align-items:baseline}
.cmName{font-weight:900}
.cmTime{color:var(--text-secondary);font-size:12px}
.cmText{color:var(--text-secondary);margin-top:4px}

.cmForm{
  display:flex;
  gap:10px;
  padding:12px 12px;
  border-top:1px solid var(--border-color);
  background:var(--bg-secondary);
}

.cmInput{
  flex:1;
  padding:12px 12px;
  border-radius:12px;
  border:1px solid var(--border-color);
  background:var(--bg-primary);
  color:var(--text-primary);
  outline:none;
}
.cmSend{
  padding:12px 14px;
  border-radius:12px;
  border:1px solid var(--border-color);
  background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary));
  color:#fff;
  font-weight:900;
  cursor:pointer;
}

.cmLoading,.cmEmpty{color:var(--text-secondary);font-weight:800}
